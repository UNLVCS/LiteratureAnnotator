<!--
  Label Studio Labeling Configuration
  Simplified annotation interface for validating LLM-generated classification results.
-->
<View>

  <!-- Main Header -->
  <View style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 8px; margin-bottom: 20px; color: white;">
    <Header value="Paper ID: $paper_id" style="color: white; font-size: 18px; margin-bottom: 5px;" />
    <Text name="title_display" value="$title" style="color: rgba(255,255,255,0.9); font-size: 14px; font-style: italic;" />
  </View>
  
  <!-- Metadata Row -->
  <View style="display: flex; gap: 1.5em; padding: 15px; background: #f8f9fa; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #667eea;">
    <Text name="provider_display" value="ðŸ¤– Provider: $provider" style="font-weight: 600; color: #495057; font-size: 14px;" />
    <Text name="criterion_display" value="ðŸ“‹ $criterion" style="font-weight: 600; color: #495057; font-size: 14px;" />
    <Text name="satisfied_display" value="âœ“ LLM Result: $satisfied" style="font-weight: 600; color: #495057; font-size: 14px;" />
  </View>

  <!-- Main container with two-column layout -->
  <View style="display: flex; gap: 20px;">

    <!-- Left Column: Classification Criteria and LLM Answer -->
    <View style="flex: 1; display: flex; flex-direction: column; gap: 20px;">

      <!-- Classification Criteria Section -->
      <View>
        <Header value="ðŸ“‹ Classification Criteria" style="font-size: 16px; font-weight: 600; color: #2c3e50; margin-bottom: 10px;" />
        <View style="background: #e3f2fd; padding: 18px; border-radius: 8px; border-left: 4px solid #2196f3;">
          <Text name="class_criteria_display" value="$class_criteria" style="line-height: 1.6; color: #1565c0; font-size: 14px;" />
        </View>
      </View>

      <!-- LLM Generated Answer Section -->
      <View>
        <Header value="ðŸ¤– LLM Generated Answer" style="font-size: 16px; font-weight: 600; color: #2c3e50; margin-bottom: 10px;" />
        <View style="background: #f1f8f4; padding: 18px; border-radius: 8px; border-left: 4px solid #4caf50;">
          <Text name="paper_content" value="$paper_text" style="line-height: 1.8; color: #1b5e20; font-size: 14px;" />
        </View>
      </View>

    </View>

    <!-- Right Column: Supporting Evidence -->
    <View style="flex: 1; display: flex; flex-direction: column; gap: 20px;">

      <!-- Retrieved Chunks Section -->
      <View>
        <Header value="ðŸ“„ Retrieved Chunks ($num_chunks chunks)" style="font-size: 16px; font-weight: 600; color: #2c3e50; margin-bottom: 10px;" />
        <View style="max-height: 400px; overflow-y: auto; background: #fafafa; padding: 15px; border-radius: 8px; border: 1px solid #dee2e6;">
          <Text name="retrieved_chunks_display" value="$retrieved_chunks" style="font-family: 'Courier New', monospace; font-size: 13px; line-height: 1.6; color: #495057; white-space: pre-wrap;" />
        </View>
      </View>
      
      <!-- Full Context Section -->
      <View>
        <Header value="ðŸ“– Full Context" style="font-size: 16px; font-weight: 600; color: #2c3e50; margin-bottom: 10px;" />
        <View style="max-height: 300px; overflow-y: auto; background: #fff8f0; padding: 15px; border-radius: 8px; border: 1px solid #ffe0b2;">
          <Text name="full_context_display" value="$full_context" style="font-family: 'Courier New', monospace; font-size: 12px; line-height: 1.6; color: #6d4c41; white-space: pre-wrap;" />
        </View>
      </View>

    </View>

  </View>
  
  <!-- Evaluation Section (Full Width) -->
  <View style="margin-top: 30px; padding: 25px; background: #ffffff; border-radius: 8px; border: 2px solid #e0e0e0; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
    
    <Header value="âœ… Your Evaluation" style="font-size: 18px; font-weight: 700; color: #2c3e50; margin-bottom: 20px; text-align: center;" />
    
    <!-- Evaluation Choice -->
    <View style="margin-bottom: 20px;">
      <Choices name="evaluation" toName="paper_content" choice="single" style="display: flex; justify-content: center; gap: 15px;">
        <Choice value="CORRECT" style="background:rgb(153, 208, 155); color: white; padding: 12px 30px; border-radius: 6px; font-weight: 600; font-size: 15px;" />
        <Choice value="INCORRECT" style="background:rgb(224, 115, 107); color: white; padding: 12px 30px; border-radius: 6px; font-weight: 600; font-size: 15px;" />
        <Choice value="ABSTAIN" style="background:rgb(222, 220, 216); color: white; padding: 12px 30px; border-radius: 6px; font-weight: 600; font-size: 15px;" />
      </Choices>
    </View>
    
    <!-- Explanation Text Box -->
    <View>
      <Header value="ðŸ’­ Explanation" style="font-size: 15px; font-weight: 600; color: #495057; margin-bottom: 10px;" />
      <TextArea name="evaluation_explanation" toName="paper_content"
                placeholder="Please explain your evaluation decision. What evidence supports your choice? What issues did you identify, if any?"
                rows="6"
                maxSubmissions="1"
                style="border: 2px solid #dee2e6; border-radius: 6px; padding: 12px; font-size: 14px; line-height: 1.6;" />
    </View>
    
  </View>

</View>
